#+TITLE: rigole's emacs config
#+AUTHOR: rigole
#+PROPERTY: header-args :tangle yes
#+auto_tangle: t
#+STARTUP: showeverything

* Emacs configuration

#+BEGIN_SRC emacs-lisp
  ;; Initialisation
  (setq inhibit-default-init t
	inhibit-startup-echo-area-message t
	inhibit-startup-screen t
	initial-scratch-message nil)

  ;; enable y/n answers
  (fset 'yes-or-no-p 'y-or-n-p)

  ;; Warn when opening files bigger than 100MB
  (setq large-file-warning-threshold 100000000)

  ;; Keep emacs Custom-settings in separate file.
  (setq custom-file (expand-file-name "custom.el" user-emacs-directory))
  (when (file-exists-p custom-file)
    (load custom-file))

  ;; store all backup and autosave files in the tmp dir
  (setq backup-directory-alist
	`((".*" . ,temporary-file-directory)))
  (setq auto-save-file-name-transforms
	`((".*" ,temporary-file-directory t)))

  ;; revert buffers automatically when underlying files are changed externally
  (global-auto-revert-mode t)

  ;; Make backups of files, even when they're in version control.
  (setq vc-make-backup-files t)

  ;; Modes
  (fido-mode t)
  (electric-pair-mode t)
  (winner-mode t)
  (line-number-mode t)
  (size-indication-mode t)
#+END_SRC

* Global keybindings

#+begin_src emacs-lisp
  ;; Opens eshell window on the right
  (global-set-key (kbd "C-c e") #'(lambda ()
				    (interactive)
				    (split-window-right)
				    (windmove-right)
				    (eshell)))
#+end_src

* Packages

Auto reloads org files
#+BEGIN_SRC emacs-lisp
  (use-package org-auto-tangle
    :defer t
    :hook (org-mode . org-auto-tangle-mode))
#+END_SRC

Makes org files way better
#+BEGIN_SRC emacs-lisp
  (use-package org-modern
    :init
    (add-hook 'org-mode-hook #'org-modern-mode)
    (add-hook 'org-agenda-finalize-hook #'org-modern-agenda))
#+END_SRC

Nice clang format package
#+BEGIN_SRC emacs-lisp
  (use-package clang-format+
    :init
    (add-hook 'c-mode-common-hook #'clang-format+-mode))
#+END_SRC

Lsp mode, maybe try eglot sometime but at the moment Lsp mode works great
#+begin_quote
Maybe configure that ;)
#+end_quote

#+begin_src emacs-lisp
  (use-package lsp-mode
    :init
    (add-hook 'c-mode-hook #'lsp))
#+end_src

* Hooks

** TODO dap-mode or enable toolbar and menu bar when gdb mode enabled
